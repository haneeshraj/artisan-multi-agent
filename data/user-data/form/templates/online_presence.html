{% extends 'base.html' %} {% block title %}Online Presence - AI Artisan Resume
Builder{% endblock %} {% block progress %}
<div class="progress-container">
  <div class="progress" style="height: 30px">
    <div
      class="progress-bar bg-primary"
      role="progressbar"
      style="width: 25%"
      aria-valuenow="25"
      aria-valuemin="0"
      aria-valuemax="100"
    >
      25%
    </div>
  </div>
  <div class="text-center mt-2">
    <small>Step 2 of 8: Online Presence</small>
  </div>
</div>
{% endblock %} {% block content %}
<div class="row justify-content-center">
  <div class="col-md-8">
    <div class="form-container">
      <h2 class="section-title">Online Presence</h2>

      <form method="post">
        <div class="form-group">
          <label for="linkedin" class="form-label">LinkedIn Profile URL</label>
          <input
            type="url"
            class="form-control"
            id="linkedin"
            name="linkedin"
            value="{{ data.get('linkedin', '') }}"
            placeholder="https://linkedin.com/in/yourusername"
          />
          <small class="text-muted"
            >Example: https://linkedin.com/in/johndoe</small
          >
        </div>

        <div class="form-group">
          <label for="github" class="form-label">GitHub Profile</label>
          <input
            type="url"
            class="form-control"
            id="github"
            name="github"
            value="{{ data.get('github', '') }}"
            placeholder="https://github.com/yourusername"
          />
          <small class="text-muted">Example: https://github.com/johndoe</small>
        </div>

        <div class="form-group">
          <label for="portfolio" class="form-label">Portfolio Website</label>
          <input
            type="url"
            class="form-control"
            id="portfolio"
            name="portfolio"
            value="{{ data.get('portfolio', '') }}"
            placeholder="https://yourwebsite.com"
          />
          <small class="text-muted">Example: https://johndoe.com</small>
        </div>

        <h4 class="mt-4 mb-3">Additional Profiles</h4>

        <div id="additional-profiles-container">
          {% if data.get('additional_profiles') %} {% for profile in
          data.get('additional_profiles') %}
          <div class="item-card additional-profile-item">
            <div class="row">
              <div class="col-md-5">
                <div class="form-group">
                  <label class="form-label">Platform Name</label>
                  <input
                    type="text"
                    class="form-control"
                    name="platform_name"
                    value="{{ profile.get('platform', '') }}"
                  />
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label class="form-label">URL</label>
                  <input
                    type="url"
                    class="form-control"
                    name="platform_url"
                    value="{{ profile.get('url', '') }}"
                  />
                </div>
              </div>
              <div
                class="col-md-1 d-flex align-items-end justify-content-center"
              >
                <button
                  type="button"
                  class="btn btn-sm btn-outline-danger remove-profile"
                >
                  ×
                </button>
              </div>
            </div>
          </div>
          {% endfor %} {% endif %}
        </div>

        <button
          type="button"
          id="add-profile"
          class="btn btn-sm btn-outline-secondary add-item-btn"
        >
          <i class="bi bi-plus-circle"></i> Add Another Profile
        </button>

        <div class="action-buttons">
          <a href="{{ url_for('personal_info') }}" class="btn btn-secondary"
            >Back</a
          >
          <button type="submit" class="btn btn-primary">Next</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %} {% block extra_js %}
<script>
  $(document).ready(function () {
    // Add new profile
    $("#add-profile").click(function () {
      const newProfile = `
                <div class="item-card additional-profile-item">
                    <div class="row">
                        <div class="col-md-5">
                            <div class="form-group">
                                <label class="form-label">Platform Name</label>
                                <input type="text" class="form-control" name="platform_name">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">URL</label>
                                <input type="url" class="form-control" name="platform_url">
                            </div>
                        </div>
                        <div class="col-md-1 d-flex align-items-end justify-content-center">
                            <button type="button" class="btn btn-sm btn-outline-danger remove-profile">×</button>
                        </div>
                    </div>
                </div>
            `;

      $("#additional-profiles-container").append(newProfile);
    });

    // Remove profile
    $(document).on("click", ".remove-profile", function () {
      $(this).closest(".additional-profile-item").remove();
    });

    // Validate URLs
    $("form").on("submit", function (e) {
      let isValid = true;

      // Check URL fields
      $('input[type="url"]').each(function () {
        const url = $(this).val().trim();
        if (url && !isValidUrl(url)) {
          isValid = false;
          $(this).addClass("is-invalid");
          if (!$(this).next(".invalid-feedback").length) {
            $(this).after(
              '<div class="invalid-feedback">Please enter a valid URL.</div>'
            );
          }
        } else {
          $(this).removeClass("is-invalid");
        }
      });

      return isValid;
    });

    function isValidUrl(url) {
      try {
        new URL(url);
        return true;
      } catch (e) {
        return false;
      }
    }
  });
</script>
{% endblock %}
