{% extends 'base.html' %} {% block title %}Projects - AI Artisan Resume
Builder{% endblock %} {% block progress %}
<div class="progress-container">
  <div class="progress" style="height: 30px">
    <div
      class="progress-bar bg-primary"
      role="progressbar"
      style="width: 75%"
      aria-valuenow="75"
      aria-valuemin="0"
      aria-valuemax="100"
    >
      75%
    </div>
  </div>
  <div class="text-center mt-2">
    <small>Step 6 of 8: Projects</small>
  </div>
</div>
{% endblock %} {% block content %}
<div class="row justify-content-center">
  <div class="col-md-8">
    <div class="form-container">
      <h2 class="section-title">Projects</h2>

      <form method="post">
        <div id="projects-container">
          {% if data %} {% for project in data %}
          <div class="item-card project-item mb-4">
            <div class="form-group">
              <label class="form-label required-field">Project Name</label>
              <input
                type="text"
                class="form-control"
                name="name"
                value="{{ project.get('name', '') }}"
                required
              />
            </div>

            <div class="form-group">
              <label class="form-label required-field"
                >Project Description</label
              >
              <textarea
                class="form-control"
                name="description"
                rows="3"
                required
              >
{{ project.get('description', '') }}</textarea
              >
            </div>

            <div class="form-group">
              <label class="form-label required-field"
                >Technologies Used (Comma separated)</label
              >
              <input
                type="text"
                class="form-control"
                name="technologies"
                value="{{ project.get('technologies', [])|join(', ') }}"
                required
              />
            </div>

            <div class="form-group">
              <label class="form-label">Project URL (Optional)</label>
              <input
                type="url"
                class="form-control"
                name="url"
                value="{{ project.get('url', '') }}"
              />
            </div>

            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label class="form-label required-field">Start Date</label>
                  <input
                    type="text"
                    class="form-control"
                    name="start_date"
                    value="{{ project.get('start_date', '') }}"
                    placeholder="Month Year"
                    required
                  />
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label class="form-label required-field">End Date</label>
                  <input
                    type="text"
                    class="form-control"
                    name="end_date"
                    value="{{ project.get('end_date', '') }}"
                    placeholder="Month Year or Present"
                    required
                  />
                </div>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label"
                >Key Highlights/Achievements (One per line)</label
              >
              <textarea class="form-control" name="highlights" rows="4">
{{ project.get('highlights', [])|join('\n') }}</textarea
              >
            </div>

            <button
              type="button"
              class="btn btn-sm btn-outline-danger remove-project"
            >
              Remove this project
            </button>
          </div>
          {% endfor %} {% else %}
          <div class="item-card project-item mb-4">
            <div class="form-group">
              <label class="form-label required-field">Project Name</label>
              <input type="text" class="form-control" name="name" required />
            </div>

            <div class="form-group">
              <label class="form-label required-field"
                >Project Description</label
              >
              <textarea
                class="form-control"
                name="description"
                rows="3"
                required
              ></textarea>
            </div>

            <div class="form-group">
              <label class="form-label required-field"
                >Technologies Used (Comma separated)</label
              >
              <input
                type="text"
                class="form-control"
                name="technologies"
                required
              />
            </div>

            <div class="form-group">
              <label class="form-label">Project URL (Optional)</label>
              <input type="url" class="form-control" name="url" />
            </div>

            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label class="form-label required-field">Start Date</label>
                  <input
                    type="text"
                    class="form-control"
                    name="start_date"
                    placeholder="Month Year"
                    required
                  />
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label class="form-label required-field">End Date</label>
                  <input
                    type="text"
                    class="form-control"
                    name="end_date"
                    placeholder="Month Year or Present"
                    required
                  />
                </div>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label"
                >Key Highlights/Achievements (One per line)</label
              >
              <textarea
                class="form-control"
                name="highlights"
                rows="4"
              ></textarea>
            </div>
          </div>
          {% endif %}
        </div>

        <button
          type="button"
          id="add-project"
          class="btn btn-outline-secondary add-item-btn"
        >
          <i class="bi bi-plus-circle"></i> Add Another Project
        </button>

        <div class="action-buttons">
          <a href="{{ url_for('education') }}" class="btn btn-secondary"
            >Back</a
          >
          <button type="submit" class="btn btn-primary">Next</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %} {% block extra_js %}
<script>
  $(document).ready(function () {
    // Add new project
    $("#add-project").click(function () {
      const newProject = `
                <div class="item-card project-item mb-4">
                    <div class="form-group">
                        <label class="form-label required-field">Project Name</label>
                        <input type="text" class="form-control" name="name" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label required-field">Project Description</label>
                        <textarea class="form-control" name="description" rows="3" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label required-field">Technologies Used (Comma separated)</label>
                        <input type="text" class="form-control" name="technologies" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Project URL (Optional)</label>
                        <input type="url" class="form-control" name="url">
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label required-field">Start Date</label>
                                <input type="text" class="form-control" name="start_date" placeholder="Month Year" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label required-field">End Date</label>
                                <input type="text" class="form-control" name="end_date" placeholder="Month Year or Present" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Key Highlights/Achievements (One per line)</label>
                        <textarea class="form-control" name="highlights" rows="4"></textarea>
                    </div>
                    
                    <button type="button" class="btn btn-sm btn-outline-danger remove-project">Remove this project</button>
                </div>
            `;

      $("#projects-container").append(newProject);
    });

    // Remove project
    $(document).on("click", ".remove-project", function () {
      if ($(".project-item").length > 1) {
        $(this).closest(".project-item").remove();
      } else {
        alert("You must have at least one project.");
      }
    });

    // Form validation
    $("form").on("submit", function (e) {
      let isValid = true;

      // Check required fields
      $(".project-item").each(function () {
        $(this)
          .find("[required]")
          .each(function () {
            if (!$(this).val().trim()) {
              isValid = false;
              $(this).addClass("is-invalid");
              if (!$(this).next(".invalid-feedback").length) {
                $(this).after(
                  '<div class="invalid-feedback">This field is required.</div>'
                );
              }
            } else {
              $(this).removeClass("is-invalid");
            }
          });
      });

      // Validate URLs
      $('input[type="url"]').each(function () {
        const url = $(this).val().trim();
        if (url && !isValidUrl(url)) {
          isValid = false;
          $(this).addClass("is-invalid");
          if (!$(this).next(".invalid-feedback").length) {
            $(this).after(
              '<div class="invalid-feedback">Please enter a valid URL.</div>'
            );
          }
        }
      });

      return isValid;
    });

    function isValidUrl(url) {
      try {
        new URL(url);
        return true;
      } catch (e) {
        return false;
      }
    }
  });
</script>
{% endblock %}
